<?php
$estacoes = [
    [
        "nome" => "Terminal Central",
        "linhas" => [
            "Tupy / Norte via Centro", "Norte / Centro", "Tupy / Centro via Goes Monteiro", "Tupy / Centro",
            "Madrugad√£o Centro / Jardim Para√≠so", "Espinheiros/Centro", "Norte / Centro via Dona Francisca",
            "Costa e Silva via IFSC / Centro", "Centro / Campus", "Costa e Silva / Centro", "Benjamin Constant / Centro",
            "Costa e Silva / Centro via Elza Meinert", "Anhanguera / Centro", "Jardim Diana / Centro",
            "IFSC via Benjamin Constant / Centro", "IFSC via Elza Meinert / Centro", "Itaum / Centro",
            "Itaum / Centro via Anit√°polis", "Itaum / Centro via Proc√≥pio Gomes", "Vila Nova / Centro",
            "Madrugad√£o Centro / Vila Nova", "Guanabara/Centro", "Guanabara/Centro", "Guanabara/Centro",
            "Sul / Centro", "Escolinha / Centro", "Iriri√∫ / Centro", "Iriri√∫ / Centro via Castro Alves",
            "Madrugad√£o Espinheiros / Aventureiro", "Petr√≥polis", "Madrugad√£o Estev√£o de Matos", "Circular Noturno Itinga",
            "Morro do Meio/Centro", "Jativoca/Centro", "Jativoca/Centro via Olaria", "Morro do Meio / Centro via Ottokar Doerffel",
            "Morro do Meio/Centro via Cohab", "Rodovi√°ria", "S√£o Marcos", "Willy Tilp via S√£o Marcos",
            "Willy Tilp", "Rodovi√°ria via Centrinho", "Rodovi√°ria via Sociesc", "Rodovi√°ria via Otto Boehm",
            "Circular Ottokar Doerffel", "Circular Anita Garibaldi", "Col√©gio Celso Ramos / Centro", "Escola do Moinho/Centro",
            "Guanabara/Centro Escola do Moinho", "Circular Centro", "Mirante", "Costa e Silva / Centro via Rui Barbosa",
            "Pirabeiraba/Centro", "Sul/Centro via Nilo Pe√ßanha", "Copacabana"
        ]
    ],
    [
        "nome" => "Terminal Norte",
        "linhas" => [
            "Tupy / Norte via Centro", "Norte / Centro", "Sul / Norte via Rodovi√°ria", "Sul / Norte via Campus",
            "Dona Francisca via Morro Cortado", "Arno W. Dohler / Norte", "Norte / Iriri√∫ / Tupy", "Norte / Iriri√∫ via Sagua√ß√∫",
            "Norte / Centro via Dona Francisca", "Norte / Iriri√∫", "Norte / Vila Nova via Walmor Harger", "Norte / Vila Nova via IFSC",
            "Norte / Vila Nova via Jo√£o Miers", "Norte / Pirabeiraba", "Norte / Pirabeiraba via Ver. Guilherme Z.",
            "Norte/Pirabeiraba via Estrada da Ilha", "Norte / Sul", "Circular Parque Douat", "Circular Rui Barbosa",
            "Dona Francisca", "Bom Retiro via Campus", "Para√≠so", "Canto do Rio Circular",
            "Norte / Campus", "Jardim Sofia", "Rui Barbosa via IFSC", "Eixo Industrial",
            "Bom Retiro via Bar√£o de Teff√©", "Para√≠so via Canto do Rio", "Para√≠so via Arno W. Dohler", "Canto do Rio via Arno W. Dohler",
            "Eixo Industrial via Boror√≥s", "Norte / Clodoaldo Gomes", "Circular Norte", "Iriri√∫ / Pirabeiraba",
            "Itaum / Pirabeiraba", "Norte / Cubat√£o Raabe", "Norte / Rio Bonito", "Norte / Av. Edmundo Doubrawa",
            "Norte / Tia Marta", "Norte / Rio Bonito via Canela", "Norte / Perini", "Perini / Iriri√∫ / Tupy",
            "Itinga / Norte", "Ribeir√£o do Cubat√£o", "Pirabeiraba/Centro", "Norte / Quiriri",
            "Norte / Quiriri via Serra", "Norte / Quiriri", "Norte / Quiriri via Serra"
        ]
    ],
    [
        "nome" => "Esta√ß√£o Iriri√∫",
        "linhas" => [
            "Norte / Iriri√∫ / Tupy", "Campus / Iriri√∫ / Tupy", "Iriri√∫ / Campus", "Norte / Iriri√∫ via Sagua√ß√∫",
            "Norte / Iriri√∫", "Tupy / Iriri√∫", "Novos Horizontes via Jo√£o Reinhold", "Comasa Iriri√∫",
            "Jardim Iriri√∫", "Iriri√∫ via Jardim Iriri√∫", "Circular Cubat√£o", "Iriri√∫ via Novos Horizontes",
            "Cohab via Parque Joinville", "Circular Tuiuti", "Em√≠lio Landmann", "Cohab",
            "Aventureiro Circular", "Vigorelli", "Cubat√£o", "Para√≠so / Iriri√∫",
            "Parque Joinville", "Aventureiro Cohab via Em√≠lio Landmann", "Aeroporto via Emilio Landmann", "Costa e Silva / Tupy via Iriri√∫",
            "Iriri√∫ / Pirabeiraba", "Perini / Iriri√∫ / Tupy", "Iriri√∫ / Sul", "Iriri√∫ / Centro",
            "Iriri√∫ / Centro via Castro Alves"
        ]
    ],
    [
        "nome" => "Esta√ß√£o Itaum",
        "linhas" => [
            "Sul / Guanabara via Itaum", "Itaum / Sul via Jo√£o Ramalho", "Sul / Itaum", "Itaum / Guanabara via Agulhas Negras",
            "Itaum / Centro", "Itaum / Centro via Anit√°polis", "Itaum / Centro via Proc√≥pio Gomes", "Itaum / Campus via Guanabara",
            "Itaum / Pirabeiraba", "Jarivatuba", "Morro do Amaral", "Padre Roma",
            "Estev√£o de Matos", "Jardim Edilene", "Rua Colombo", "Paranaguamirim",
            "Circular Guarani", "Morro do Amaral via Jardim Edilene", "Jarivatuba via Padre Roma", "Paranaguamirim via Monsenhor Gercino",
            "Madrugad√£o Estev√£o de Matos", "Col√©gio Celso Ramos / Guanabara / Itaum", "Itaum / Lepper via Guanabara", "Norte/Itaum"
        ]
    ],
    [
        "nome" => "Esta√ß√£o Vila Nova",
        "linhas" => [
            "Norte / Vila Nova via Walmor Harger", "Norte / Vila Nova via IFSC", "Norte / Vila Nova via Jo√£o Miers", "Vila Nova",
            "Bento T. da Rocha", "Paulo Schneider", "Jo√£o Miers", "Paulo Schneider via Vila Nova",
            "Bento T. da Rocha via Parque XV", "Estrada Anaburgo", "Estrada Anaburgo via Boror√≥s", "Circular Boror√≥s",
            "Bento T. da Rocha via Vila Nova", "Vila Nova via Estrada do Sul", "Vila Nova via Cristo Rei", "Estrada Blumenau via SaltoII",
            "Circular Oeste", "Sal√£o Jacob", "Circular Oeste via Estrada Blumenau", "Vila Nova / Centro"
        ]
    ],
    [
        "nome" => "Terminal Sul",
        "linhas" => [
            "Sul / Campus", "Sul / Norte via Rodovi√°ria", "Sul / Norte via Campus", "Sul / Guanabara via Itaum",
            "Itaum / Sul via Jo√£o Ramalho", "Sul / Itaum", "Norte / Sul", "Sul / Centro",
            "Itinga / Norte", "Escolinha / Centro", "Circular Noturno Itinga", "Col√©gio Celso Ramos / Sul",
            "Viqua / Sul", "Plasbohn / Sul", "Col√©gio Rudolfo Meyer / Sul", "Col√©gio Dom Pio / Sul",
            "Iriri√∫/Sul", "Escolinha via Boehmerwaldt", "Itinga", "Profipo",
            "Km 11", "Escolinha via Santa Helena", "Estrada Parati via Othon Mader", "Rua Portugal",
            "Ronco D' √Ågua", "Porto Rico", "Sul/Centro via Nilo Pe√ßanha", "Copacabana",
            "Eixo Sul", "Ronco D' √Ågua via Thaiti", "Itinga via Profipo", "Eixo Sul via BR 101",
            "Sul / Rodovi√°ria", "Km 11 via Cidade de Luziana", "Circular Santa Catarina", "Circular Rua S√£o Paulo"
        ]
    ],
    [
        "nome" => "Terminal Tupy",
        "linhas" => [
            "Tupy / Norte via Centro", "Tupy / Centro via Goes Monteiro", "Tupy / Centro", "Espinheiros/Centro",
            "Norte / Iriri√∫ / Tupy", "Campus / Iriri√∫ / Tupy", "Tupy / Iriri√∫", "Tupy / Guanabara",
            "Aventureiro / Tupy", "Costa e Silva / Tupy via Iriri√∫", "Espinheiros", "Circular Ponte Serrada",
            "Goes Monteiro Circular", "Praia Grande via Baltazar Buschle", "Dom Greg√≥rio Warmeling", "Perini / Iriri√∫ / Tupy",
            "Espinheiros via Baltazar Buschle"
        ]
    ],
    [
        "nome" => "Esta√ß√£o Guanabara",
        "linhas" => [
            "Sul / Guanabara via Itaum", "Itaum / Guanabara via Agulhas Negras", "Tupy / Guanabara", "Itaum / Campus via Guanabara",
            "Guanabara/Centro", "Guanabara/Centro", "Guanabara/Centro", "Circular Adhemar Garcia",
            "Ulysses Guimar√£es", "Teres√≥polis", "Jos√© Loureiro", "Ulysses via Jos√© Loureiro",
            "Jos√© Loureiro via Jarivatuba", "Col√©gio Celso Ramos / Guanabara / Itaum", "Itaum / Lepper via Guanabara", "Guanabara/Centro Escola do Moinho"
        ]
    ],
    [
        "nome" => "Esta√ß√£o Pirabeiraba",
        "linhas" => [
            "Norte / Pirabeiraba", "Norte / Pirabeiraba via Ver. Guilherme Z.", "Norte/Pirabeiraba via Estrada da Ilha", "Itaum / Pirabeiraba",
            "Norte / Rio Bonito", "Norte / Tia Marta", "Norte / Rio Bonito via Canela", "Pirabeiraba / Rio da Prata Final",
            "Pirabeiraba / Rio da Prata", "Pirabeiraba / Estrada Milderau", "Pirabeiraba / Estrada Pirabeiraba", "Pirabeiraba / Escola Agr√≠cola",
            "Pirabeiraba / Rio Bonito", "Pirabeiraba / Bairro", "Pirabeiraba / Cubat√£o Raabe", "Pirabeiraba / Estrada do Oeste via Canela",
            "Pirabeiraba / Tia Marta", "Pirabeiraba / Rio Bonito via Canela", "Pirabeiraba / Estrada Fazenda", "Pirabeiraba / Estrada do Oeste",
            "Pirabeiraba / Rio Bonito via Estrada do Oeste", "Pirabeiraba / Quiriri", "Pirabeiraba / Quiriri via Serra", "Pirabeiraba / Quiriri Final",
            "Pirabeiraba / Quiriri Final via Serra", "Norte / Quiriri", "Norte / Quiriri via Serra"
        ]
    ],
    [
        "nome" => "Outras Linhas",
        "linhas" => [
            "Avelino Marcante / Estrada da Ilha", "Avelino Marcante /Jardim Kelly", "Avelino Marcante / Estrada da Ilha / Jardim Kelly", "Estev√£o de Matos / Nilson Bender"
        ]
    ]
];
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $page = $_POST['redirect_page'] ?? '';
    switch ($page) {
        case 'sensores':
            header('Location: sensor.php');
            exit();
        case 'trens':
            header('Location: trens.php');
            exit();
        case 'estacoes':
            header('Location: estacoes.php');
            exit();
        case 'perfil':
            header('Location: perfil.php');
            exit();
        default:
            header('Location: index.php'); 
            
    }
}
?>


<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Esta√ß√µes</title>
</head>
<body>

<div class="container">

    <header>
        <button class="btn-back" onclick="history.back()">&#8592;</button>
        <h1>ESTA√á√ïES</h1>
    </header>

    <input type="text" id="searchInput" placeholder="üîç Pesquisar Esta√ß≈ëes" onkeyup="filterStations()" autocomplete="off" />

    <div id="stationsContainer">
        <?php foreach ($estacoes as $index => $estacao): ?>
            <div class="station" data-name="<?= strtolower($estacao['nome']) ?>">
                <div class="station-header" onclick="toggleLines(<?= $index ?>)">
                    <img src="assets/icons/station-icon.png" alt="Esta√ß√£o" class="icon" onerror="this.style.display='none'" />
                    <h2><?= htmlspecialchars($estacao['nome']) ?></h2>
                    <span class="toggle-arrow" id="arrow-<?= $index ?>">&#9650;</span>
                </div>
                <div class="lines-list visible" id="lines-<?= $index ?>">
                    <?php if (count($estacao['linhas']) > 0): ?>
                        <?php foreach ($estacao['linhas'] as $linha): ?>
                            <span><?= htmlspecialchars($linha) ?></span>
                        <?php endforeach; ?>
                    <?php else: ?>
                        <p style="color:#777; font-style: italic;">Nenhuma linha dispon√≠vel</p>
                    <?php endif; ?>
                </div>
            </div>
        <?php endforeach; ?>
    </div>

</div>

<footer>
  <form action="" method="post" style="display: inline;">
    <input type="hidden" name="redirect_page" value="sensores">
    <button type="submit" title="Sensores" style="border: none; background: none; cursor: pointer;">
        <img src="../assets/icons/tela_sensor_icon.png" alt="bot√£o para tela sensores" width="60" height="60">
    </button>
</form>
<form action="" method="post" style="display: inline; margin-left: 10px;">
    <input type="hidden" name="redirect_page" value="trens">
    <button type="submit" title="Trens" style="border: none; background: none; cursor: pointer;">
        <img src="../assets/icons/tela_tren_icon.png" alt="bot√£o para tela trens" width="60" height="60">
    </button>
</form>
<form action="" method="post" style="display: inline; margin-left: 10px;">
    <input type="hidden" name="redirect_page" value="estacoes">
    <button type="submit" title="Estacoes" style="border: none; background: none; cursor: pointer;">
        <img src="../assets/icons/tela_estacao_icon.png" alt="bot√£o para tela estacoes" width="60" height="60">
    </button>
</form>
<form action="" method="post" style="display: inline; margin-left: 10px;">
    <input type="hidden" name="redirect_page" value="perfil">
    <button type="submit" title="Perfil" style="border: none; background: none; cursor: pointer;">
        <img src="../assets/icons/tela_perfil_icon.png" alt="bot√£o para tela perfil" width="60" height="60">
    </button>
</form>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const stations = document.querySelectorAll('.station');
        stations.forEach((station, idx) => {
            const lines = station.querySelector('.lines-list');
            const arrow = station.querySelector('.toggle-arrow');
            if (idx === 0) {
                lines.classList.add('visible');
                arrow.classList.remove('rotate');
            } else {
                lines.classList.remove('visible');
                arrow.classList.add('rotate');
            }
        });
    });

    function toggleLines(index) {
        const lines = document.getElementById('lines-' + index);
        const arrow = document.getElementById('arrow-' + index);
        if (lines.classList.contains('visible')) {
            lines.classList.remove('visible');
            arrow.classList.add('rotate');
        } else {
            lines.classList.add('visible');
            arrow.classList.remove('rotate');
        }
    }

    function filterStations() {
        const input = document.getElementById('searchInput');
        const filter = input.value.toLowerCase();
        const stations = document.querySelectorAll('#stationsContainer .station');

        stations.forEach(station => {
            const name = station.getAttribute('data-name');
            if (name.includes(filter)) {
                station.style.display = '';
            } else {
                station.style.display = 'none';
            }
        });
    }
</script>

</body>
</html>