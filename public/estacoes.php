<?php
$estacoes = [
    [
        "nome" => "Terminal Central",
        "linhas" => [
            "Tupy / Norte via Centro", "Norte / Centro", "Tupy / Centro via Goes Monteiro", "Tupy / Centro",
            "Madrugadão Centro / Jardim Paraíso", "Espinheiros/Centro", "Norte / Centro via Dona Francisca",
            "Costa e Silva via IFSC / Centro", "Centro / Campus", "Costa e Silva / Centro", "Benjamin Constant / Centro",
            "Costa e Silva / Centro via Elza Meinert", "Anhanguera / Centro", "Jardim Diana / Centro",
            "IFSC via Benjamin Constant / Centro", "IFSC via Elza Meinert / Centro", "Itaum / Centro",
            "Itaum / Centro via Anitápolis", "Itaum / Centro via Procópio Gomes", "Vila Nova / Centro",
            "Madrugadão Centro / Vila Nova", "Guanabara/Centro", "Guanabara/Centro", "Guanabara/Centro",
            "Sul / Centro", "Escolinha / Centro", "Iririú / Centro", "Iririú / Centro via Castro Alves",
            "Madrugadão Espinheiros / Aventureiro", "Petrópolis", "Madrugadão Estevão de Matos", "Circular Noturno Itinga",
            "Morro do Meio/Centro", "Jativoca/Centro", "Jativoca/Centro via Olaria", "Morro do Meio / Centro via Ottokar Doerffel",
            "Morro do Meio/Centro via Cohab", "Rodoviária", "São Marcos", "Willy Tilp via São Marcos",
            "Willy Tilp", "Rodoviária via Centrinho", "Rodoviária via Sociesc", "Rodoviária via Otto Boehm",
            "Circular Ottokar Doerffel", "Circular Anita Garibaldi", "Colégio Celso Ramos / Centro", "Escola do Moinho/Centro",
            "Guanabara/Centro Escola do Moinho", "Circular Centro", "Mirante", "Costa e Silva / Centro via Rui Barbosa",
            "Pirabeiraba/Centro", "Sul/Centro via Nilo Peçanha", "Copacabana"
        ]
    ],
    [
        "nome" => "Terminal Norte",
        "linhas" => [
            "Tupy / Norte via Centro", "Norte / Centro", "Sul / Norte via Rodoviária", "Sul / Norte via Campus",
            "Dona Francisca via Morro Cortado", "Arno W. Dohler / Norte", "Norte / Iririú / Tupy", "Norte / Iririú via Saguaçú",
            "Norte / Centro via Dona Francisca", "Norte / Iririú", "Norte / Vila Nova via Walmor Harger", "Norte / Vila Nova via IFSC",
            "Norte / Vila Nova via João Miers", "Norte / Pirabeiraba", "Norte / Pirabeiraba via Ver. Guilherme Z.",
            "Norte/Pirabeiraba via Estrada da Ilha", "Norte / Sul", "Circular Parque Douat", "Circular Rui Barbosa",
            "Dona Francisca", "Bom Retiro via Campus", "Paraíso", "Canto do Rio Circular",
            "Norte / Campus", "Jardim Sofia", "Rui Barbosa via IFSC", "Eixo Industrial",
            "Bom Retiro via Barão de Teffé", "Paraíso via Canto do Rio", "Paraíso via Arno W. Dohler", "Canto do Rio via Arno W. Dohler",
            "Eixo Industrial via Bororós", "Norte / Clodoaldo Gomes", "Circular Norte", "Iririú / Pirabeiraba",
            "Itaum / Pirabeiraba", "Norte / Cubatão Raabe", "Norte / Rio Bonito", "Norte / Av. Edmundo Doubrawa",
            "Norte / Tia Marta", "Norte / Rio Bonito via Canela", "Norte / Perini", "Perini / Iririú / Tupy",
            "Itinga / Norte", "Ribeirão do Cubatão", "Pirabeiraba/Centro", "Norte / Quiriri",
            "Norte / Quiriri via Serra", "Norte / Quiriri", "Norte / Quiriri via Serra"
        ]
    ],
    [
        "nome" => "Estação Iririú",
        "linhas" => [
            "Norte / Iririú / Tupy", "Campus / Iririú / Tupy", "Iririú / Campus", "Norte / Iririú via Saguaçú",
            "Norte / Iririú", "Tupy / Iririú", "Novos Horizontes via João Reinhold", "Comasa Iririú",
            "Jardim Iririú", "Iririú via Jardim Iririú", "Circular Cubatão", "Iririú via Novos Horizontes",
            "Cohab via Parque Joinville", "Circular Tuiuti", "Emílio Landmann", "Cohab",
            "Aventureiro Circular", "Vigorelli", "Cubatão", "Paraíso / Iririú",
            "Parque Joinville", "Aventureiro Cohab via Emílio Landmann", "Aeroporto via Emilio Landmann", "Costa e Silva / Tupy via Iririú",
            "Iririú / Pirabeiraba", "Perini / Iririú / Tupy", "Iririú / Sul", "Iririú / Centro",
            "Iririú / Centro via Castro Alves"
        ]
    ],
    [
        "nome" => "Estação Itaum",
        "linhas" => [
            "Sul / Guanabara via Itaum", "Itaum / Sul via João Ramalho", "Sul / Itaum", "Itaum / Guanabara via Agulhas Negras",
            "Itaum / Centro", "Itaum / Centro via Anitápolis", "Itaum / Centro via Procópio Gomes", "Itaum / Campus via Guanabara",
            "Itaum / Pirabeiraba", "Jarivatuba", "Morro do Amaral", "Padre Roma",
            "Estevão de Matos", "Jardim Edilene", "Rua Colombo", "Paranaguamirim",
            "Circular Guarani", "Morro do Amaral via Jardim Edilene", "Jarivatuba via Padre Roma", "Paranaguamirim via Monsenhor Gercino",
            "Madrugadão Estevão de Matos", "Colégio Celso Ramos / Guanabara / Itaum", "Itaum / Lepper via Guanabara", "Norte/Itaum"
        ]
    ],
    [
        "nome" => "Estação Vila Nova",
        "linhas" => [
            "Norte / Vila Nova via Walmor Harger", "Norte / Vila Nova via IFSC", "Norte / Vila Nova via João Miers", "Vila Nova",
            "Bento T. da Rocha", "Paulo Schneider", "João Miers", "Paulo Schneider via Vila Nova",
            "Bento T. da Rocha via Parque XV", "Estrada Anaburgo", "Estrada Anaburgo via Bororós", "Circular Bororós",
            "Bento T. da Rocha via Vila Nova", "Vila Nova via Estrada do Sul", "Vila Nova via Cristo Rei", "Estrada Blumenau via SaltoII",
            "Circular Oeste", "Salão Jacob", "Circular Oeste via Estrada Blumenau", "Vila Nova / Centro"
        ]
    ],
    [
        "nome" => "Terminal Sul",
        "linhas" => [
            "Sul / Campus", "Sul / Norte via Rodoviária", "Sul / Norte via Campus", "Sul / Guanabara via Itaum",
            "Itaum / Sul via João Ramalho", "Sul / Itaum", "Norte / Sul", "Sul / Centro",
            "Itinga / Norte", "Escolinha / Centro", "Circular Noturno Itinga", "Colégio Celso Ramos / Sul",
            "Viqua / Sul", "Plasbohn / Sul", "Colégio Rudolfo Meyer / Sul", "Colégio Dom Pio / Sul",
            "Iririú/Sul", "Escolinha via Boehmerwaldt", "Itinga", "Profipo",
            "Km 11", "Escolinha via Santa Helena", "Estrada Parati via Othon Mader", "Rua Portugal",
            "Ronco D' Água", "Porto Rico", "Sul/Centro via Nilo Peçanha", "Copacabana",
            "Eixo Sul", "Ronco D' Água via Thaiti", "Itinga via Profipo", "Eixo Sul via BR 101",
            "Sul / Rodoviária", "Km 11 via Cidade de Luziana", "Circular Santa Catarina", "Circular Rua São Paulo"
        ]
    ],
    [
        "nome" => "Terminal Tupy",
        "linhas" => [
            "Tupy / Norte via Centro", "Tupy / Centro via Goes Monteiro", "Tupy / Centro", "Espinheiros/Centro",
            "Norte / Iririú / Tupy", "Campus / Iririú / Tupy", "Tupy / Iririú", "Tupy / Guanabara",
            "Aventureiro / Tupy", "Costa e Silva / Tupy via Iririú", "Espinheiros", "Circular Ponte Serrada",
            "Goes Monteiro Circular", "Praia Grande via Baltazar Buschle", "Dom Gregório Warmeling", "Perini / Iririú / Tupy",
            "Espinheiros via Baltazar Buschle"
        ]
    ],
    [
        "nome" => "Estação Guanabara",
        "linhas" => [
            "Sul / Guanabara via Itaum", "Itaum / Guanabara via Agulhas Negras", "Tupy / Guanabara", "Itaum / Campus via Guanabara",
            "Guanabara/Centro", "Guanabara/Centro", "Guanabara/Centro", "Circular Adhemar Garcia",
            "Ulysses Guimarães", "Teresópolis", "José Loureiro", "Ulysses via José Loureiro",
            "José Loureiro via Jarivatuba", "Colégio Celso Ramos / Guanabara / Itaum", "Itaum / Lepper via Guanabara", "Guanabara/Centro Escola do Moinho"
        ]
    ],
    [
        "nome" => "Estação Pirabeiraba",
        "linhas" => [
            "Norte / Pirabeiraba", "Norte / Pirabeiraba via Ver. Guilherme Z.", "Norte/Pirabeiraba via Estrada da Ilha", "Itaum / Pirabeiraba",
            "Norte / Rio Bonito", "Norte / Tia Marta", "Norte / Rio Bonito via Canela", "Pirabeiraba / Rio da Prata Final",
            "Pirabeiraba / Rio da Prata", "Pirabeiraba / Estrada Milderau", "Pirabeiraba / Estrada Pirabeiraba", "Pirabeiraba / Escola Agrícola",
            "Pirabeiraba / Rio Bonito", "Pirabeiraba / Bairro", "Pirabeiraba / Cubatão Raabe", "Pirabeiraba / Estrada do Oeste via Canela",
            "Pirabeiraba / Tia Marta", "Pirabeiraba / Rio Bonito via Canela", "Pirabeiraba / Estrada Fazenda", "Pirabeiraba / Estrada do Oeste",
            "Pirabeiraba / Rio Bonito via Estrada do Oeste", "Pirabeiraba / Quiriri", "Pirabeiraba / Quiriri via Serra", "Pirabeiraba / Quiriri Final",
            "Pirabeiraba / Quiriri Final via Serra", "Norte / Quiriri", "Norte / Quiriri via Serra"
        ]
    ],
    [
        "nome" => "Outras Linhas",
        "linhas" => [
            "Avelino Marcante / Estrada da Ilha", "Avelino Marcante /Jardim Kelly", "Avelino Marcante / Estrada da Ilha / Jardim Kelly", "Estevão de Matos / Nilson Bender"
        ]
    ]
];
?>


<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Estações</title>

    <style>
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            background-color: #000;
            font-family: Arial, sans-serif;
            color: #fff;
        }

        .container {
            max-width: 430px;
            margin: 20px auto;
            padding: 0 10px;
        }

        header {
            display: flex;
            align-items: center;
            padding: 5px 0;
            gap: 10px;
        }
        .btn-back {
            background-color: #0538a7;
            border-radius: 50%;
            border: none;
            width: 32px;
            height: 32px;
            cursor: pointer;
            color: white;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        h1 {
            display: inline-block;
            background-color: #0538a7;
            border-radius: 16px;
            padding: 5px 20px;
            font-weight: 700;
            font-size: 18px;
            margin: 0;
            color: white;
            flex-grow: 1;
            text-align: center;
        }

        #searchInput {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 2px solid #0538a7;
            color: #ccc;
            font-weight: 600;
            padding: 8px 10px;
            margin-bottom: 15px;
        }
        #searchInput::placeholder {
            color: #777;
            font-weight: 600;
        }
        #searchInput:focus {
            outline: none;
            border-color: #1a73e8;
            color: #fff;
        }

        .station {
            margin-bottom: 25px;
            border-bottom: 2px solid #0538a7;
            padding-bottom: 15px;
        }

        .station-header {
            display: flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            padding: 0 2px;
        }
        .station-header img.icon {
            width: 30px;
            height: 30px;
            margin-right: 10px;
            filter: invert(100%);
        }
        .station-header h2 {
            font-weight: 700;
            font-size: 20px;
            color: white;
            flex-grow: 1;
        }
        .toggle-arrow {
            font-size: 22px;
            color: #0a5fff;
            user-select: none;
            transition: transform 0.3s ease;
        }
        .toggle-arrow.rotate {
            transform: rotate(180deg);
        }

        .lines-list {
            display: none;
            margin-top: 10px;
        }
        .lines-list.visible {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        .lines-list span {
            font-weight: 600;
            font-size: 13px;
            color: white;
            width: calc(33.3% - 10px);
        }

        footer {
            background: #000;
            padding: 15px 0 25px;
            display: flex;
            justify-content: space-around;
            border-top: 1px solid #0a5fff;
            position: fixed; 
            bottom: 0;
            width: 100%;
            z-index: 1000;
        }
        footer button {
            background: transparent;
            border: none;
            font-size: 26px;
            color: #108000;
            cursor: pointer;
        }
        footer button:hover {
            color: #1aff1a;
        }

    </style>
</head>
<body>

<div class="container">

    <header>
        <button class="btn-back" onclick="history.back()">&#8592;</button>
        <h1>ESTAÇÕES</h1>
    </header>

    <input type="text" id="searchInput" placeholder="🔍 Pesquisar Estaçőes" onkeyup="filterStations()" autocomplete="off" />

    <div id="stationsContainer">
        <?php foreach ($estacoes as $index => $estacao): ?>
            <div class="station" data-name="<?= strtolower($estacao['nome']) ?>">
                <div class="station-header" onclick="toggleLines(<?= $index ?>)">
                    <img src="assets/icons/station-icon.png" alt="Estação" class="icon" onerror="this.style.display='none'" />
                    <h2><?= htmlspecialchars($estacao['nome']) ?></h2>
                    <span class="toggle-arrow" id="arrow-<?= $index ?>">&#9650;</span>
                </div>
                <div class="lines-list visible" id="lines-<?= $index ?>">
                    <?php if (count($estacao['linhas']) > 0): ?>
                        <?php foreach ($estacao['linhas'] as $linha): ?>
                            <span><?= htmlspecialchars($linha) ?></span>
                        <?php endforeach; ?>
                    <?php else: ?>
                        <p style="color:#777; font-style: italic;">Nenhuma linha disponível</p>
                    <?php endif; ?>
                </div>
            </div>
        <?php endforeach; ?>
    </div>

</div>

<footer>
    <button title="Sensores"><img src="../assets/icons/tela_sensor_icon.png" alt="botão para tela sensor" width="60" height="60"></button>
    <button title="Trens"><img src="../assets/icons/tela_tren_icon.png" alt="botão para tela sensor" width="60" height="60"></button>
    <button title="Estacoes"><img src="../assets/icons/tela_estacao_icon.png" alt="botão para tela sensor" width="60" height="60"></button>
    <button title="Perfil"><img src="../assets/icons/tela_perfil_icon.png" alt="botão para tela sensor" width="60" height="60"></button>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const stations = document.querySelectorAll('.station');
        stations.forEach((station, idx) => {
            const lines = station.querySelector('.lines-list');
            const arrow = station.querySelector('.toggle-arrow');
            if (idx === 0) {
                lines.classList.add('visible');
                arrow.classList.remove('rotate');
            } else {
                lines.classList.remove('visible');
                arrow.classList.add('rotate');
            }
        });
    });

    function toggleLines(index) {
        const lines = document.getElementById('lines-' + index);
        const arrow = document.getElementById('arrow-' + index);
        if (lines.classList.contains('visible')) {
            lines.classList.remove('visible');
            arrow.classList.add('rotate');
        } else {
            lines.classList.add('visible');
            arrow.classList.remove('rotate');
        }
    }

    function filterStations() {
        const input = document.getElementById('searchInput');
        const filter = input.value.toLowerCase();
        const stations = document.querySelectorAll('#stationsContainer .station');

        stations.forEach(station => {
            const name = station.getAttribute('data-name');
            if (name.includes(filter)) {
                station.style.display = '';
            } else {
                station.style.display = 'none';
            }
        });
    }
</script>

</body>
</html>